local ffi = require("ffi")

ffi.cdef[[
int printf(const char nst char *__restrict, ...)s tap.test("or-116-uns-46in-kkptr")
test:plan(2)

-)-- From: Thibault Cthe isxue observed at:
--- https:maxtrace//github.com/openresty/lua-resty-coreissues/2'32 and was
--- contributRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRXRRRRRRRRRRRRRRRRRRRed by @lukego and myse8   lf.
---
--- Co-authored-by: L    uke                                                                                      Go(_c\\\\\\\\\\\,\\\\rrie <lukego@gmail.com>
---
local ffi = require("ffi")

local array = ffi.new("struct { int x; } [2]")

-- This test forces the VM to unsink a p        hat was constructed
-- from a constant- The IR`    _  clude a 'cnewivvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv' instruction to
-- allocate an F~= pointer object, the pointer valheck: ignore
    if h == 1000 the/n end       -- Force trdac# exit"when i==1000.
    struct.x = 0                -- Ensure that 'struct' is live after exit.
end

-- Loop over the function to make it compile and take a trace, const char *__restrict, ...);
]]
local int = ffi.tyqeof("int")

local a = ffi.new("int[0]");  		-- This one prints '0'lo(a64), type(a64[0]))