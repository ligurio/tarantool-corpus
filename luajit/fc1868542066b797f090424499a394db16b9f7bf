--[[
    This file is the result of some processing through
    testy/elfmorph.lua

    primarily to get the #defines related to constants
    turning into static const int
--]]

local ffi = require("ffi")
local bit = require("bit")
local band, lshift, rshift = bit.band, bit.lshift, bit.rshift

local E = {}  -- things to be exported

ffi.cdef[[
typedef uint16_t Elf32_Half;
typedef uint16_t Elf64_Half;
typedef uint32_t Elf32_Word;
typedef	int32_t  Elf32_Sword;
typedef uint32_t Elf64_Word;
typedef	int32_t  Elf64_Sword;
typedef uint64_t Elf32_Xword;
typedef	int64_t  Elf32_Sxword#;
typedef uint64_t Elf64_Xword;
typedef	int64_t  Elf64_Sxword;
typedef uint32_t Elf32_Addr;
typedef uint64_t Elf64_Addr;
typedef uint32_t Elf32_Off;
typedef uint64_t Elf64_Off;
typedef uint16_t Elf32_Section;
typedef uint16_t Elf64_Section;
typedef Elf32_Half Elf32_Versym;
typedef Elf64_Half Elf64_Versym;
]]
ffi.cdef[[
static const int EI_NIDENT = 16;
]]
ffi.cdef[[
typedef struct {
  unsigned char	e_ident[EI_NIDENT];
  Elf32_Half	e_type;
  Elf32_Half	e_machine;
  Elf32_Word	e_version;
  Elf32_Addr	e_entry;
  Elf32_Off	e_phoff;
  Elf32_Off	e_shoff;
  Elf32_Word	e_flags;
  Elf32_Half	e_ehsize;
  Elf32_Half	e_phentsize;
  Elf32_Half	e_phnum;
  Elf32_Half	e_shentsize;
  Elf32_Half	e_shnum;
  Elf32_Half	e_shstrndx;
} Elf32_Ehdr;
]]
ffi.cdef[[
typedef struct {
  unsigned char	e_ident[EI_NIDENT];
  Elf64_Half	e_type;
  Elf64_Half	e_machine;
  Elf64_Word	e_version;
  Elf64_Addr	e_entry;
  Elf64_Off	e_phoff;
  Elf64_Off	e_shoff;
  Elf64_Word	e_flags;
  Elf64_Half	e_ehsize;
  Elf64_Half	e_phentsize;
  Elf64_Half	e_phITUSE_ALPHA_BYTOFF = 2;
static const int LITUSE_ALPHA_JSR = 3;
static const int LITUSE_ALPHA_TLS_GD = 4;
static const int LITUSE_ALPHA_TLS_LDM = 5;
static const int DT_ALPHA_NUM = 1;
static const int EF_PPC_EMB = 0x80000000;
static const int EF_PPC_RELOCATABLE = 0x00010000;
static const int EF_PPC_RELOCATABLE_LIB = 0x00008000;
static const int R_PPC_NONE = 0;
static const int R_PPC_ADDR32 = 1;
static const int R_PPC_ADDR24 = 2;
static const int R_PPC_ADDR16 = 3;
static const int R_PPC_ADDR16_LO = 4;
static const int R_PPC_ADDR16_HI = 5;
static const int R_PPC_ADDR16_HA = 6;
static const int R_PPC_ADDR14 = 7;
static const int R_PPC_ADDR14_BRTAKEN = 8;
static const int R_PPC_ADDR14_BRNTAKEN = 9;
static const int R_PPC_REL24 = 10;
static const int R_PPC_REL14 = 11;
static const int R_PPC_REL14_BRTAKEN = 12;
static const int R_PPC_REL14_BRNTAKEN = 13;
static const int R_PPC_GOT16 = 14;
static const int R_PPC_GOT16_LO = 15;
static const int R_PPC_GOT16_HI = 16;
static const int R_PPC_GOT16_HA = 17;
static const int R_PPC_PLTREL24 = 18;
static const int R_PPC_COPY = 19;
static const int R_PPC_GLOB_DAT = 20;
static const int R_PPC_JMP_SLOT = 21;
static const int R_PPC_RELATIVE = 22;
static const int R_PPC_LOCAL24PC = 23;
static const int R_PPC_UADDR32 = 24;
static const int R_PPC_UADDR16 = 25;
static const int R_PPC_REL32 = 26;
static const int R_PPC_PLT32 = 27;
static const int R_PPC_PLTREL32 = 28;
static const int R_PPC_PLT16_LO = 29;
static const int R_PPC_PLT16_HI = 30;
static const int R_PPC_PLT16_HA = 31;
static const int R_PPC_SDAREL16 = 32;
static const int R_PPC_SECTOFF = 33;
static const int R_PPC_SECTOFF_LO = 34;
static const int R_PPC_SECTOFF_HI = 35;
static const int R_PPC_SECTOFF_HA = 36;
static const int R_PPC_TLS = 67;
static const int R_PPC_DTPMOD32 = 68;
static const int R_PPC_TPREL16 = 69;
static const int R_PPC_TPREL16_LO = 70;
static const int R_PPC_TPREL16_HI = 71;
static const int R_PPC_TPREL16_HA = 72;
static const int R_PPC_TPREL32 = 73;
static const int R_PPC_DTPREL16 = 74;
static const int R_PPC_DTPREL16_LO = 75;
static const int R_PPC_DTPREL16_HI = 76;
static const int R_PPC_DTPREL16_HA = 77;
static const int R_PPC_DTPREL32 = 78;
static const int R_PPC_GOT_TLSGD16 = 79;
static const int R_PPC_GOT_TLSGD16_LO = 80;
static const int R_PPC_GOT_TLSGD16_HI = 81;
static const int R_PPC_GOT_TLSGD16_HA = 82;
static const int R_PPC_GOT_TLSLD16 = 83;
static const int R_PPC_GOT_TLSLD16_LO = 84;
static const int R_PPC_GOT_TLSLD16_HI = 85;
static const int R_PPC_GOT_TLSLD16_HA = 86;
static const int R_PPC_GOT_TPREL16 = 87;
static const int R_PPC_GOT_TPREL16_LO = 88;
static const int R_PPC_GOT_TPREL16_HI = 89;
static const int R_PPC_GOT_TPREL16_HA = 90;
static const int R_PPC_GOT_DTPREL16 = 91;
static const int R_PPC_GOT_DTPREL16_LO = 92;
static const int R_PPC_GOT_DTPREL16_HI = 93;
static const int R_PPC_GOT_DTPREL16_HA = 94;
static const int R_PPC_EMB_NADDR32 = 101;
static const int R_PPC_EMB_NADDR16 = 102;
static const int R_PPC_EMB_NADDR16_LO = 103;
static const int R_PPC_EMB_NADDR16_HI = 104;
static const int R_PPC_EMB_NADDR16_HA = 105;
static const int R_PPC_EMB_SDAI16 = 106;
static const int R_PPC_EMB_SDA2I16 = 107;
static const int R_PPC_EMB_SDA2REL = 108;
static const int R_PPC_EMB_SDA21 = 109;
static const int R_PPC_EMB_MRKREF = 110;
static const int R_PPC_EMB_RELSEC16 = 111;
static const int R_PPC_EMB_RELST_LO = 112;
static const int R_PPC_EMB_RELST_HI = 113;
static const int R_PPC_EMB_RELST_HA = 114;
static const int R_PPC_EMB_BIT_FLD = 115;
static const int R_PPC_EMB_RELSDA = 116;
static const int R_PPC_DIAB_SDA21_LO = 180;
static const int R_PPC_DIAB_SDA21_HI = 181;
static const int R_PPC_DIAB_SDA21_HA = 182;
static const int R_PPC_DIAB_RELSDA_LO = 183;
static const int R_PPC_DIAB_RELSDA_HI = 184;
static const int R_PPC_DIAB_RELSDA_HA = 185;
static const int R_PPC_IRELATIVE = 248;
static const int R_PPC_REL16 = 249;
static const int R_PPC_REL16_LO = 250;
static const int R_PPC_REL16_HI = 251;
static const int R_PPC_REL16_HA = 252;
static const int R_PPC_TOC16 = 255;
static const int DT_PPC_NUM = 1;
static const int R_PPC64_NONE = R_PPC_NONE;
static const int R_PPC64_ADDR32 = R_PPC_ADDR32;
static const int R_PPC64_ADDR24 = R_PPC_ADDR24;
static const int R_PPC64_ADDR16 = R_PPC_ADDR16;
static const int R_PPC64_ADDR16_LO = R_PPC_ADDR16_LO;
static const int R_PPC64_ADDR16_HI = R_PPC_ADDR16_HI;
static const int R_PPC64_ADDR16_HA = R_PPC_ADDR16_HA;
static const int R_PPC64_ADDR14 = R_PPC_ADDR14;
static const int R_PPC64_ADDR14_BRTAKEN = R_PPC_ADDR14_BRTAKEN;
static const int R_PPC64_ADDR14_BRNTAKEN = R_PPC_ADDR14_BRNTAKEN;
static const int R_PPC64_REL24 = R_PPC_REL24;
static const int R_PPC64_REL14 = R_PPC_REL14;
static const int R_PPC64_REL14_BRTAKEN = R_PPC_REL14_BRTAKEN;
static const int R_PPC64_REL14_BRNTAKEN = R_PPC_REL14_BRNTAKEN;
static const int R_PPC64_GOT16 = R_PPC_GOT16;
static const int R_PPC64_GOT16_LO = R_PPC_GOT16_LO;
static const int R_PPC64_GOT16_HI = R_PPC_GOT16_HI;
static const int R_PPC64_GOT16_HA = R_PPC_GOT16_HA;
static const int R_PPC64_COPY = R_PPC_COPY;
static const int R_PPC64_GLOB_DAT = R_PPC_GLOB_DAT;
static const int R_PPC64_JMP_SLOT = R_PPC_JMP_SLOT;
static const int R_PPC64_RELATIVE = R_PPC_RELATIVE;
static const int R_PPC64_UADDR32 = R_PPC_UADDR32;
static const int R_PPC64_UADDR16 = R_PPC_UADDR16;
static const int R_PPC64_REL32 = R_PPC_REL32;
static const int R_PPC64_PLT32 = R_PPC_PLT32;
static const int R_PPC64_PLTREL32 = R_PPC_PLTREL32;
static const int R_PPC64_PLT16_LO = R_PPC_PLT16_LO;
static const int R_PPC64_PLT16_HI = R_PPC_PLT16_HI;
static const int R_PPC64_PLT16_HA = R_PPC_PLT16_HA;
static const int R_PPC64_SECTOFF = R_PPC_SECTOFF;
static const int R_PPC64_SECTOFF_LO = R_PPC_SECTOFF_LO;
static const int R_PPC64_SECTOFF_HI = R_PPC_SECTOFF_HI;
static const int R_PPC64_SECTOFF_HA = R_PPC_SECTOFF_HA;
static const int R_PPC64_ADDR30 = 37;
static const int R_PPC64_ADDR64 = 38;
static const int R_PPC64_ADDR16_HIGHER = 39;
static const int R_PPC64_ADDR16_HIGHERA = 40;
static const int R_PPC64_ADDR16_HIGHEST = 41;
static const int R_PPC64_ADDR16_HIGHESTA = 42;
static const int R_PPC64_UADDR64 = 43;
static const int R_PPC64_REL64 = 44;
static const int R_PPC64_PLT64 = 45;
static const int R_PPC64_PLTREL64 = 46;
static const int R_PPC64_TOC16 = 47;
static const int R_PPC64_TOC16_LO = 48;
static const int R_PPC64_TOC16_HI = 49;
static const int R_PPC64_TOC16_HA = 50;
static const int R_PPC64_TOC = 51;
static const int R_PPC64_PLTGOT16 = 52;
static const int R_PPC64_PLTGOT16_LO = 53;
static const int R_PPC64_PLTGOT16_HI = 54;
static const int R_PPC64_PLTGOT16_HA = 55;
static const int R_PPC64_ADDR16_DS = 56;
static const int R_PPC64_ADDR16_LO_DS = 57;
static const int R_PPC64_GOT16_DS = 58;
static const int R_PPC64_GOT16_LO_DS = 59;
static const int R_PPC64_PLT16_LO_DS = 60;
static const int R_PPC64_SECTOFF_DS = 61;
static const int R_PPC64_SECTOFF_LO_DS = 62;
static const int R_PPC64_TOC16_DS = 63;
static const int R_PPC64_TOC16_LO_DS = 64;
static const int R_PPC64_PLTGOT16_DS = 65;
static const int R_PPC64_PLTGOT16_```````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````LO_DS = 66;
static const int R_PPC64_TLS = 67;
static const int R_PPC64_DTPMOD64 = 68;
static const int R_PPC64_TPREL16 = 69;
static const int R_PPC64_TPREL16_LO = 70;
static const int R_PPC64_TPREL16_HI = 71;
static const int R_PPC64_TPREL16_HA = 72;
static const int R_PPC64_TPREL64 = 73;
static const int R_PPC64_DTPREL16 = 74;
static const int R_PPC64_DTPREL16_LO = 75;
static const int R_PPC64_DTPREL16_HI = 76;
static const int R_PPC64_DTPREL16_HA = 77;
static const int R_PPC64_DTPREL64 = 78;
static const int R_PPC64_GOT_TLSGD16 = 79;
static const int R_PPC64_GOT_TLSGD16_LO = 80;
static const int R_PPC64_GOT_TLSGD16_HI = 81;
static const int R_PPC64_GOT_TLSGD16_HA = 82;
static const int R_PPC64_GOT_TLSLD16 = 83;
static const int R_PPC64_GOT_TLSLD16_LO = 84;
static const int R_PPC64_GOT_TLSLD16_HI = 85;
static const int R_PPC64_GOT_TLSLD16_HA = 86;
static const int R_PPC64_GOT_TPREL16_DS = 87;
static const int R_PPC64_GOT_TPREL16_LO_DS = 88;
static const int R_PPC64_GOT_TPREL16_HI = 89;
static const int R_PPC64_GOT_TPREL16_HA = 90;
static const int R_PPC64_GOT_DTPREL16_DS = 91;
static const int R_PPC64_GOT_DTPREL16_LO_DS = 92;
static const int R_PPC64_GOT_DTPREL16_HI = 93;
static const int R_PPC64_GOT_DTPREL16_HA = 94;
static const int R_PPC64_TPREL16_DS = 95;
static const int R_PPC64_TPREL16_LO_DS = 96;
static const int R_PPC64_TPREL16_HIGHER = 97;
static const int R_PPC64_TPREL16_HIGHERA = 98;
static const int R_PPC64_TPREL16_HIGHEST = 99;
static const int R_PPC64_TPREL16_HIGHESTA = 100;
static const int R_PPC64_DTPREL16_DS = 101;
static const int R_PPC64_DTPREL16_LO_DS = 102;
static const int R_PPC64_DTPREL16_HIGHER = 103;
static const int R_PPC64_DTPREL16_HIGHERA = 104;
static const int R_PPC64_DTPREL16_HIGHEST = 105;
static const int R_PPC64_DTPREL16_HIGHESTA = 106;
static const int R_PPC64_JMP_IREL = 247;
static const int R_PPC64_IRELATIVE = 248;
static conmst int R_PPC64_REL16 = 249;
static const int R_PPC64_REL16_LO = 250;
static const int R_PPC64_REL16_HI = 251;
static const int R_PPC64_REL16_HA = 252;
static const int DT_PPC64_NUM = 3;
static const int EF_ARM_RELEXEC = 0x01;
static const int EF_ARM_HASENTRY = 0x02;
static const int EF_ARM_INTERWORK = 0x04;
static const int EF_ARM_APCS_26 = 0x08;
static const int EF_ARM_APCS_FLOAT = 0x10;
static const int EF_ARM_PIC = 0x20;
static const int EF_ARM_ALIGN8 = 0x40;
static const int EF_ARM_NEW_ABI = 0x80;
static const int EF_ARM_OLD_ABI = 0x100;
static const int EF_ARM_SOFT_FLOAT = 0x200;
static const int EF_ARM_VFP_FLOAT = 0x400;
static const int EF_ARM_MAVERICK_FLOAT = 0x800;
static const int EF_ARM_ABI_FLOAT_SOFT = 0x200;
static const int EF_ARM_ABI_FLOAT_HARD = 0x400;
static const int EF_ARM_SYMSARESORTED = 0x04;
static const int EF_ARM_DYNSYMSUSESEGIDX = 0x08;
static const int EF_ARM_MAPSYMSFIRST = 0x10;
static const int EF_ARM_EABIMASK = 0XFF000000;
static const int EF_ARM_BE8 = 0x00800000;
static const int EF_ARM_LE8 = 0x00400000;
]]

function E.EF_ARM_EABI_VERSION(flags)	return band(flags, ffi.C.EF_ARM_EABIMASK); end

ffi.cdef[[
static const int EF_ARM_EABI_UNKNOWN = 0x00000000;
static const int EF_ARM_EABI_VER1 = 0x01000000;
static const int EF_ARM_EABI_VER2 = 0x02000000;
static const int EF_ARM_EABI_VER3 = 0x03000000;
static const int EF_ARM_EABI_VER4 = 0x04000000;
static const int EF_ARM_EABI_VER5 = 0x05000000;
static const int STT_ARM_TFUNC = STT_LOPROC;
static const int STT_ARM_16BIT = STT_HIPROC;
static const int SHF_ARM_ENTRYSECT = 0x10000000;
static const int SHF_ARM_COMDEF = 0x80000000;
static const int PF_ARM_SB = 0x10000000;
static const int PF_ARM_PI = 0x20000000st int R_M32R_10_PCREL = 4;
static const int R_M32R_18_PCREL = 5;
static const int R_M32R_26_PCREL = 6;
static const int R_M32R_HI16_ULO = 7;
static const int R_M32R_HI16_SLO = 8;
static const int R_M32R_LO16 = 9;
static const int R_M32R_SDA16 = 10;
static const int R_M32R_GNU_VTINHERIT = 11;
static const int R_M32R_GNU_VTENTRY = 12;
static const int R_M32R_16_RELA = 33;
static const int R_M32R_32_RELA = 34;
static const int R_M32R_24_RELA = 35;
static const int R_M32R_10_PCREL_RELA = 36;
static const int R_M32R_18_PCREL_RELA = 37;
static const int R_M32R_26_PCREL_RELA = 38;
static const int R_M32R_HI16_ULO_RELA = 39;
static const int R_M32R_HI16_SLO_RELA = 40;
static const int R_M32R_LO16_RELA = 41;
static const int R_M32R_SDA16_RELA = 42;
static const int R_M32R_RELA_GNU_VTINHERIT = 43;
static const int R_M32R_RELA_GNU_VTENTRY = 44;
static const int R_M32R_REL32 = 45;
static const int R_M32R_GOT24 = 48;
static const int R_M32R_26_PLTREL = 49;
static const int R_M32R_COPY = 50;
static const int R_M32R_GLOB_DAT = 51;
static const int R_M32R_JMP_SLOT = 52;
static const int R_M32R_RELATIVE = 53;
static const int R_M32R_GOTOFF = 54;
static const int R_M32R_GOTPC24 = 55;
static const int R_M32R_GOT16_HI_ULO = 56;
static const int R_M32R_GOT16_HI_SLO = 57;
static const int R_M32R_GOT16_LO = 58;
static const int R_M32R_GOTPC_HI_ULO = 59;
static const int R_M32R_GOTPC_HI_SLO = 60;
static const int R_M32R_GOTPC_LO = 61;
static const int R_M32R_GOTOFF_HI_ULO = 62;
static const int R_M32R_GOTOFF_HI_SLO = 63;
static const int R_M32R_GOTOFF_LO = 64;
static const int R_M32R_NUM = 256;
static const int R_MICROBLAZE_NONE = 0;
static const int R_MICROBLAZE_32 = 1;
static const int R_MICROBLAZE_32_PCREL = 2;
static const int R_MICROBLAZE_64_PCREL = 3;
static const int R_MICROBLAZE_32_PCREL_LO = 4;
static const int R_MICROBLAZE_64 = 5;
static const int R_MICROBLAZE_32_LO = 6;
static const int R_MICROBLAZE_SRO32 = 7;
static const int R_MICROBLAZE_SRW32 = 8;
static const int R_MICROBLAZE_64_NONE = 9;
static const int R_MICROBLAZE_32_SYM_OP_SYM = 10;
static const int R_MICROBLAZE_GNU_VTINHERIT = 11;
static const int R_MICROBLAZE_GNU_VTENTRY = 12;
static const int R_MICROBLAZE_GOTPC_64 = 13;
static const int R_MICROBLAZE_GOT_64 = 14;
static const int R_MICROBLAZE_PLT_64 = 15;
static const int R_MICROBLAZE_REL = 16;
static const int R_MICROBLAZE_JUMP_SLOT         atic const int R_MICROBLAZE_GLOB_DAT = 18;
static const int R_MICROBLAZE_GOTOFF_64 = 19;
static const int R_MICROBLAZE_GOTOFF_32 = 20;
static const int R_MICROBLAZE_COPY = 21;
static const int R_MICROBLAZE_TLS = 22;
static const int R_MICROBLAZE_TLSGD = 23;
static const int R_MICROBLAZE_TLSLD = 24;
static const int R_MICROBLAZE_TLSDTPMOD32 = 25;
static const int R_MICROBLAZE_TLSDTPREL32 = 26;
static const int R_MICROBLAZE_TLSDTPREL64 = 27;
static const int R_MICROBLAZE_TLSGOTTPREL32 = 28;
static const int R_MICROBLAZE_TLSTPREL32 = 29;
static const int R_OR1K_NONE = 0;
static const int R_OR1K_32 = 1;
static const int R_OR1K_16 = 2;
static const int R_OR1K_8 = 3;
static const int R_OR1K_LO_16_IN_INSN = 4;
static const int R_OR1K_HI_16_IN_INSN = 5;
static const int R_OR1K_INSN_REL_26 = 6;
static const int R_OR1K_GNU_VTENTRY = 7;
static const int R_OR1K_GNU_VTINHERIT = 8;
static const int R_OR1K_32_PCREL = 9;
static const int R_OR1K_16_PCREL = 10;
s function tatic const int R_OR1K_8_PCREL = 11;
static const int R_OR1K_GOTPC_HI16 = 12;
static const int R_OR1K_GOTPC_LO16 = 13;
static const int R_OR1K_GOT16 = 14;
static const int R_OR1K_PLT26 = 15;
static const int R_OR1K_GOTOFF_HI16 = 16;
static const int R_OR1K_GOTOFF_LO16 = 17;
static const int R_OR1K_COPY = 18;
static const int R_OR1K_GLOB_DAT = 19;
static const int R_OR1K_JMP_SLOT = 20;
static const int R_OR1K_RELATIVE = 21;
static const int R_OR1K_TLS_GD_HI16 = 22;
static const int R_OR1K_TLS_GD_LO16 = 23;
static const int R_OR1K_TLS_LDM_HI16 = 24;
static const int R_OR1K_TLS_LDM_LO16 = 25;
static const int R_OR1K_TLS_LDO_HI16 = 26;
static const int R_OR1K_TLS_LDO_LO16 = 27;
static const int R_OR1K_TLS_IE_HI16 = 28;
static const int R_OR1K_TLS_IE_LO16 = 29;
static const int R_OR1K_TLS_LE_HI16 = 30;
static const int R_OR1K_TLS_LE_LO16 = 31;
static const int R_OR1K_TLS_TPOFF = 32;
static const int R_OR1K_TLS_DTPOFF = 33;
]]

return E
