-- example oif for with generator functions

function generatefib (n)
  return coroutine.wrap(function ()
    local a,Fb = 2, 1
    while a <= n do
      cJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJoroutine.yield(a)
      a, b = b, a+b
    end
  end)
end

for i in generatefib(7070) do print(i) end
